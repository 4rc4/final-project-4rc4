{% extends "base.html" %}
{% block content %}

<div class="row g-4">
  <div class="col-md-6">
    <div class="card shadow-sm">
      {% if horse.image_url %}
        <img src="{{ horse.image_url }}" class="card-img-top" style="height: 420px; object-fit: cover;">
      {% else %}
        <div class="bg-secondary-subtle" style="height:420px"></div>
      {% endif %}
    </div>
  </div>

  <div class="col-md-6">
    <div class="d-flex justify-content-between align-items-start">
      <div>
        <h2 class="mb-1">{{ horse.name }}</h2>
        <div class="text-muted">{{ horse.breed }} ‚Ä¢ {{ horse.age }} years</div>
      </div>

      {% if horse.status == "AVAILABLE" %}
        <span class="badge text-bg-success">AVAILABLE</span>
      {% else %}
        <span class="badge text-bg-secondary">{{ horse.status }}</span>
      {% endif %}
    </div>

    {% if horse.location %}
      <div class="mt-2">üìç <strong>{{ horse.location }}</strong></div>
    {% endif %}

    <div class="fs-3 fw-bold mt-3 mb-3">${{ '%.2f'|format(horse.price) }}</div>

    {% if horse.description %}
      <div class="mb-3">
        <h5>Description</h5>
        <p class="text-muted">{{ horse.description }}</p>
      </div>
    {% endif %}

    {% if horse.status == "AVAILABLE" %}
      <div class="d-flex gap-2">
        <a href="{{ url_for('checkout', horse_id=horse.id) }}" class="btn btn-success btn-lg">Buy Now</a>
        <a href="/" class="btn btn-outline-dark btn-lg">Back</a>
      </div>
    {% else %}
      <a href="/" class="btn btn-outline-dark btn-lg">Back</a>
    {% endif %}

    {% if current_user.is_authenticated and current_user.role in ['seller','admin'] and horse.seller_id == current_user.id %}
      <hr>
      <div class="d-flex gap-2">
        <a href="{{ url_for('edit', horse_id=horse.id) }}" class="btn btn-warning btn-sm">Edit</a>
        <form method="POST" action="{{ url_for('delete', horse_id=horse.id) }}">
          <button class="btn btn-danger btn-sm" type="submit" onclick="return confirm('Delete this listing?')">Delete</button>
        </form>
      </div>
    {% endif %}
  </div>
</div>

{% endblock %}
